var carObj={cars:[]};var loanYears=5;var mpy=15000;var cpg=3.5;var highestGridLine=8000;var highestTotalCost=6840;var lowestCostCar=[];var lowestCost=0;function loadJsonDust(a){$.getJSON("json/"+a+".json").done(function(b){dust.render(a,b,function(d,c){$("#"+a).html(c).toggleClass("open")})}).fail(function(){})}function loadDust(a){dust.render(a,empty,function(c,b){$("#"+a).html(b).toggleClass("open")})}function buildChartObject(){carObj.cars=[];lowestCostCar=[];$.getJSON("json/example-chart.json").done(function(a){$.each(a.carData,function(e,f){var c=f;var b=(cpg/f.cmpg)*mpy;var g=f.cost/loanYears;c.costYear=g;c.costYearView=formatMoney(g);c.fuelCost=b;c.fuelCostView=formatMoney(b);c.totalCost=b+g;c.totalCostView=formatMoney(b+g);carObj.cars.push(c);lowestCostCar.push(c.totalCost)})}).fail(function(){});carObj.cars.sort(function(e,c){var d=e.cost,f=c.cost;5;if(d==f){return 0}return d>f?1:-1});lowestCost=Math.min.apply(null,lowestCostCar)}function buildChart(){dust.render("example-chart",carObj,function(g,f){$("#example-chart").html(f).toggleClass("open");$("#cpgSlider").slider({value:cpg,min:3,max:6,step:0.25,animate:"slow",create:function(h,i){$("#fuelCost").html("$"+cpg.toFixed(2))},slide:function(h,i){var j=i.value;cpg=j;$("#fuelCost").html("$"+cpg.toFixed(2));updateCosts()}});$("#mpySlider").slider({value:mpy,min:10000,max:20000,step:1000,animate:"slow",create:function(h,i){$("#mpyCost").html(formatDigits(mpy))},slide:function(h,i){var j=i.value;mpy=j;$("#mpyCost").html(formatDigits(mpy));updateCosts()}})});var c=1000;var a=Math.floor(highestGridLine/c);var e='<div  class="grid-line" style="bottom: 0%;"><span>$0</span></div>';for(var d=1;d<=a;d++){var b=(((d*c)/highestGridLine)*100);e+='<div  class="grid-line" style="bottom: '+b+'%;"><span>'+formatMoney(d*c)+"</span></div>"}$(".chart").append(e)}function animateCosts(){$.each(carObj.cars,function(b,e){var c=(e.costYear/highestGridLine)*100;var a=(e.fuelCost/highestGridLine)*100;var f=(e.totalCost/highestGridLine)*100;$('.bar[data-id = "'+e.id+'"] .cover-div').css("height",f+"%");$('.bar[data-id = "'+e.id+'"] .fuel-costs').css("bottom",c+"%");if(e.totalCost==lowestCost){$('.bar[data-id = "'+e.id+'"]').prepend("<div class='lowest-cost'>Lowest Cost</div>");$(".lowest-cost").css("bottom",f+"%");setTimeout(function(){$(".lowest-cost").addClass("show")},700)}setTimeout(function(){$('.bar[data-id = "'+e.id+'"] .year-payment').css("height",c+"%").html(e.costYearView)},100);setTimeout(function(){$('.bar[data-id = "'+e.id+'"] .fuel-costs').css("height",a+"%").html(e.fuelCostView)},600);$('.bar[data-id = "'+e.id+'"] .cover-div').tooltip({items:"[ttc]",content:function(){return"Total Cost: "+e.totalCostView},position:{my:"center bottom-10",at:"center top",using:function(d,g){$(this).css(d);$("<div>").addClass("arrow").addClass(g.vertical).addClass(g.horizontal).appendTo(this)}}})})}function updateCosts(){$(".lowest-cost").remove();buildChartObject();$.each(carObj.cars,function(b,c){var a=(c.fuelCost/highestGridLine)*100;var e=(c.totalCost/highestGridLine)*100;$('.bar[data-id = "'+c.id+'"] .cover-div').css("height",e+"%");$('.bar[data-id = "'+c.id+'"] .fuel-costs').css("height",a+"%").html(c.fuelCostView);if(c.totalCost==lowestCost){$('.bar[data-id = "'+c.id+'"]').prepend("<div class='lowest-cost'>Lowest Cost</div>");$(".lowest-cost").css("bottom",e+"%");setTimeout(function(){$(".lowest-cost").addClass("show")},700)}})}$(document).on("click","._exampleLink",function(){var a=$(this).attr("data-id");$('._exampleLink[data-id = "'+a+'"]').toggleClass("open");switch(a){case"example-chart":buildChartObject();buildChart();animateCosts();break;case"example-heatmaps":loadDust(a);loadMap();break;default:loadDust(a);break}});var viewportWidth=jQuery(window).width();var minWidthScroll=1024;var empty=[];$.ajaxSetup({async:false});dust.onLoad=function(a,b){$.ajax("dust/"+a+".dust",{success:function(c){b(undefined,c)},error:function(c,e,d){b(e,undefined)}})};function loadExampleList(){$.getJSON("json/code-examples-list.json").done(function(a){dust.render("example-list-view",a,function(c,b){$("#exampleDesc").html(b)})}).fail(function(){})}function formatMoney(a){var b=(a.toFixed(0)).toString();b=b.replace(/\B(?=(\d{3})+(?!\d))/g,",");return"$"+b}function formatDigits(a){var b=a.toString();return b.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function sizeSections(){var a=jQuery(window).height();$("section").css("min-height",a+"px")}$(document).ready(function(){loadExampleList();loadResume();if(viewportWidth>=minWidthScroll){sizeSections()}$("a._scrollLink").click(function(){$("a._scrollLink").removeClass("selected");$(this).addClass("selected");if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var b=$(this.hash);b=b.length?b:$("[name="+this.hash.slice(1)+"]");if(b.length){$("html,body").animate({scrollTop:b.offset().top-80},1000);return false}}});var a=71;$(window).scroll(function(){if(viewportWidth>=minWidthScroll){var f=$(window).scrollTop()+80;var c=$("#about").offset().top;var d=$("#work").offset().top;var e=$("#resume").offset().top;var b=$("#contact").offset().top;if(c<=f&&f<d){$("#about").addClass("fixed");$("nav a").removeClass("selected");$("nav a._about").addClass("selected")}else{$("#about").removeClass("fixed")}if(d<=f&&f<e){$("#work").addClass("fixed");$("nav a").removeClass("selected");$("nav a._work").addClass("selected")}else{$("#work").removeClass("fixed")}if(e<=f&&f<b){$("#resume").addClass("fixed");$("nav a").removeClass("selected");$("nav a._resume").addClass("selected")}else{$("#resume").removeClass("fixed")}if(b<=f){$("#contact").addClass("fixed");$("nav a").removeClass("selected");$("nav a._contact").addClass("selected")}else{$("#contact").removeClass("fixed")}}})});$(window).resize(function(){viewportWidth=jQuery(window).width();if(viewportWidth>=minWidthScroll){sizeSections()}});function loadMap(){var h,e,g;var a=new google.maps.LatLng(45.176229,-87.083344);var c={zoom:12,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};h=new google.maps.Map($("#heatmapArea")[0],c);var f=[new google.maps.LatLng(45.127682,-87.245049),new google.maps.LatLng(45.162434,-87.195824),new google.maps.LatLng(45.185848,-87.148193),new google.maps.LatLng(45.125259,-87.234299),new google.maps.LatLng(45.296684,-87.060471),new google.maps.LatLng(45.227032,-86.989662),new google.maps.LatLng(45.219139,-87.033905),new google.maps.LatLng(45.187672,-87.123138),new google.maps.LatLng(44.929928,-87.173607),new google.maps.LatLng(44.905602,-87.215546),new google.maps.LatLng(45.184746,-87.123688),new google.maps.LatLng(45.1852,-87.129898),new google.maps.LatLng(45.181282,-87.142792),new google.maps.LatLng(45.128471,-87.25074),new google.maps.LatLng(45.128887,-87.251793),new google.maps.LatLng(45.340244,-86.940826),new google.maps.LatLng(44.837658,-87.376717),new google.maps.LatLng(44.834511,-87.379791),new google.maps.LatLng(44.851124,-87.358742),new google.maps.LatLng(44.850445,-87.349144),new google.maps.LatLng(44.859764,-87.412056),new google.maps.LatLng(45.159828,-87.232307),new google.maps.LatLng(44.792084,-87.309425),new google.maps.LatLng(45.061459,-87.123741),new google.maps.LatLng(45.06142,-87.124596),new google.maps.LatLng(45.065422,-87.123718)];var b=new google.maps.MVCArray(f);g=new google.maps.visualization.HeatmapLayer({data:b});g.set("opacity",0.4);g.set("radius",40);g.setMap(h);var d=new google.maps.KmlLayer({url:"http://lisavonhudson.com/js/DoorCountyWI.kml"});d.setMap(h)}function loadResume(){$.getJSON("json/resume.json").done(function(c){dust.render("resume",c,function(e,d){$("#resume").append(d)});var a=new Date().getFullYear();var b=a-c.resume[0].skills[0].years;$(c.resume[0].skills).each(function(g,h){var j=h.id;var f=a-h.years;var e=(f/b)*100;setTimeout(function(){$("#"+j+" .fill").html(f).css("width",e+"%")},100)})}).fail(function(){})}$(document).on("mousedown",".gauge-container",function(a){$(document).on("mousemove",".gauge-container",function(k){var c=$(this).offset();var o=k.pageX-c.left;var n=k.pageY-c.top;var g=$(this).height();var h=$(this).width()/2;var p=180/Math.PI;if(o<h){var i=g-n;var m=h-o;var l=i/m;var b=Math.atan(l)*p}else{var i=g-n;var m=o-h;var l=i/m;var f=Math.atan(l)*p;var b=180-f}if(b>=0&&b<=180){$("#meter").attr("transform","rotate("+b+" 100 100)");var d=b.toFixed();var j="Safe";$(".level-container").removeClass("okay danger").addClass("safe");if(d>61&&d<120){j="Okay";$(".level-container").removeClass("safe danger").addClass("okay")}if(d>120){j="Danger!";$(".level-container").removeClass("safe okay").addClass("danger")}$(".danger-meter .level").html("Level "+d);$(".danger-meter .desc").html(j)}})});$(document).on("mouseup",".gauge-container",function(){$(document).off("mousemove",".gauge-container")});