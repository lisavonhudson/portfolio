var dust={};function getGlobal(){return(function(){return this.dust}).call(null)}(function(dust){dust.cache={};dust.register=function(name,tmpl){if(!name){return}dust.cache[name]=tmpl};dust.render=function(name,context,callback){var chunk=new Stub(callback).head;dust.load(name,chunk,Context.wrap(context)).end()};dust.stream=function(name,context){var stream=new Stream();dust.nextTick(function(){dust.load(name,stream.head,Context.wrap(context)).end()});return stream};dust.renderSource=function(source,context,callback){return dust.compileFn(source)(context,callback)};dust.compileFn=function(source,name){var tmpl=dust.loadSource(dust.compile(source,name));return function(context,callback){var master=callback?new Stub(callback):new Stream();dust.nextTick(function(){tmpl(master.head,Context.wrap(context)).end()});return master}};dust.load=function(name,chunk,context){var tmpl=dust.cache[name];if(tmpl){return tmpl(chunk,context)}else{if(dust.onLoad){return chunk.map(function(chunk){dust.onLoad(name,function(err,src){if(err){return chunk.setError(err)}if(!dust.cache[name]){dust.loadSource(dust.compile(src,name))}dust.cache[name](chunk,context).end()})})}return chunk.setError(new Error("Template Not Found: "+name))}};dust.loadSource=function(source,path){return eval(source)};if(Array.isArray){dust.isArray=Array.isArray}else{dust.isArray=function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}}dust.nextTick=(function(){if(typeof process!=="undefined"){return process.nextTick}else{return function(callback){setTimeout(callback,0)}}})();dust.isEmpty=function(value){if(dust.isArray(value)&&!value.length){return true}if(value===0){return false}return(!value)};dust.filter=function(string,auto,filters){if(filters){for(var i=0,len=filters.length;i<len;i++){var name=filters[i];if(name==="s"){auto=null}else{if(typeof dust.filters[name]==="function"){string=dust.filters[name](string)}}}}if(auto){string=dust.filters[auto](string)}return string};dust.filters={h:function(value){return dust.escapeHtml(value)},j:function(value){return dust.escapeJs(value)},u:encodeURI,uc:encodeURIComponent,js:function(value){if(!JSON){return value}return JSON.stringify(value)},jp:function(value){if(!JSON){return value}return JSON.parse(value)}};function Context(stack,global,blocks){this.stack=stack;this.global=global;this.blocks=blocks}dust.makeBase=function(global){return new Context(new Stack(),global)};Context.wrap=function(context){if(context instanceof Context){return context}return new Context(new Stack(context))};Context.prototype.get=function(key){var ctx=this.stack,value;while(ctx){if(ctx.isObject){value=ctx.head[key];if(!(value===undefined)){return value}}ctx=ctx.tail}return this.global?this.global[key]:undefined};Context.prototype.getPath=function(cur,down){var ctx=this.stack,len=down.length;if(cur&&len===0){return ctx.head}ctx=ctx.head;var i=0;while(ctx&&i<len){ctx=ctx[down[i]];i++}return ctx};Context.prototype.push=function(head,idx,len){return new Context(new Stack(head,this.stack,idx,len),this.global,this.blocks)};Context.prototype.rebase=function(head){return new Context(new Stack(head),this.global,this.blocks)};Context.prototype.current=function(){return this.stack.head};Context.prototype.getBlock=function(key,chk,ctx){if(typeof key==="function"){key=key(chk,ctx).data;chk.data=""}var blocks=this.blocks;if(!blocks){return}var len=blocks.length,fn;while(len--){fn=blocks[len][key];if(fn){return fn}}};Context.prototype.shiftBlocks=function(locals){var blocks=this.blocks,newBlocks;if(locals){if(!blocks){newBlocks=[locals]}else{newBlocks=blocks.concat([locals])}return new Context(this.stack,this.global,newBlocks)}return this};function Stack(head,tail,idx,len){this.tail=tail;this.isObject=!dust.isArray(head)&&head&&typeof head==="object";this.head=head;this.index=idx;this.of=len}function Stub(callback){this.head=new Chunk(this);this.callback=callback;this.out=""}Stub.prototype.flush=function(){var chunk=this.head;while(chunk){if(chunk.flushable){this.out+=chunk.data}else{if(chunk.error){this.callback(chunk.error);this.flush=function(){};return}else{return}}chunk=chunk.next;this.head=chunk}this.callback(null,this.out)};function Stream(){this.head=new Chunk(this)}Stream.prototype.flush=function(){var chunk=this.head;while(chunk){if(chunk.flushable){this.emit("data",chunk.data)}else{if(chunk.error){this.emit("error",chunk.error);this.flush=function(){};return}else{return}}chunk=chunk.next;this.head=chunk}this.emit("end")};Stream.prototype.emit=function(type,data){if(!this.events){return false}var handler=this.events[type];if(!handler){return false}if(typeof handler=="function"){handler(data)}else{var listeners=handler.slice(0);for(var i=0,l=listeners.length;i<l;i++){listeners[i](data)}}};Stream.prototype.on=function(type,callback){if(!this.events){this.events={}}if(!this.events[type]){this.events[type]=callback}else{if(typeof this.events[type]==="function"){this.events[type]=[this.events[type],callback]}else{this.events[type].push(callback)}}return this};Stream.prototype.pipe=function(stream){this.on("data",function(data){stream.write(data,"utf8")}).on("end",function(){stream.end()}).on("error",function(err){stream.error(err)});return this};function Chunk(root,next,taps){this.root=root;this.next=next;this.data="";this.flushable=false;this.taps=taps}Chunk.prototype.write=function(data){var taps=this.taps;if(taps){data=taps.go(data)}this.data+=data;return this};Chunk.prototype.end=function(data){if(data){this.write(data)}this.flushable=true;this.root.flush();return this};Chunk.prototype.map=function(callback){var cursor=new Chunk(this.root,this.next,this.taps),branch=new Chunk(this.root,cursor,this.taps);this.next=branch;this.flushable=true;callback(branch);return cursor};Chunk.prototype.tap=function(tap){var taps=this.taps;if(taps){this.taps=taps.push(tap)}else{this.taps=new Tap(tap)}return this};Chunk.prototype.untap=function(){this.taps=this.taps.tail;return this};Chunk.prototype.render=function(body,context){return body(this,context)};Chunk.prototype.reference=function(elem,context,auto,filters){if(typeof elem==="function"){elem.isFunction=true;elem=elem.apply(context.current(),[this,context,null,{auto:auto,filters:filters}]);if(elem instanceof Chunk){return elem}}if(!dust.isEmpty(elem)){return this.write(dust.filter(elem,auto,filters))}else{return this}};Chunk.prototype.section=function(elem,context,bodies,params){if(typeof elem==="function"){elem=elem.apply(context.current(),[this,context,bodies,params]);if(elem instanceof Chunk){return elem}}var body=bodies.block,skip=bodies["else"];if(params){context=context.push(params)}if(dust.isArray(elem)){if(body){var len=elem.length,chunk=this;if(len>0){if(context.stack.head){context.stack.head["$len"]=len}for(var i=0;i<len;i++){if(context.stack.head){context.stack.head["$idx"]=i}chunk=body(chunk,context.push(elem[i],i,len))}if(context.stack.head){context.stack.head["$idx"]=undefined;context.stack.head["$len"]=undefined}return chunk}else{if(skip){return skip(this,context)}}}}else{if(elem===true){if(body){return body(this,context)}}else{if(elem||elem===0){if(body){if(context.stack.head&&typeof elem==="object"){context.stack.head["$idx"]=0;context.stack.head["$len"]=1}chunk=body(this,context.push(elem));if(context.stack.head&&typeof elem==="object"){context.stack.head["$idx"]=undefined;context.stack.head["$len"]=undefined}return chunk}}else{if(skip){return skip(this,context)}}}}return this};Chunk.prototype.exists=function(elem,context,bodies){var body=bodies.block,skip=bodies["else"];if(!dust.isEmpty(elem)){if(body){return body(this,context)}}else{if(skip){return skip(this,context)}}return this};Chunk.prototype.notexists=function(elem,context,bodies){var body=bodies.block,skip=bodies["else"];if(dust.isEmpty(elem)){if(body){return body(this,context)}}else{if(skip){return skip(this,context)}}return this};Chunk.prototype.block=function(elem,context,bodies){var body=bodies.block;if(elem){body=elem}if(body){return body(this,context)}return this};Chunk.prototype.partial=function(elem,context,params){var partialContext;if(params){partialContext=dust.makeBase(context.global);partialContext.blocks=context.blocks;if(context.stack&&context.stack.tail){partialContext.stack=context.stack.tail}partialContext=partialContext.push(params);partialContext=partialContext.push(context.stack.head)}else{partialContext=context}if(typeof elem==="function"){return this.capture(elem,partialContext,function(name,chunk){dust.load(name,chunk,partialContext).end()})}return dust.load(elem,this,partialContext)};Chunk.prototype.helper=function(name,context,bodies,params){if(dust.helpers[name]){return dust.helpers[name](this,context,bodies,params)}};Chunk.prototype.capture=function(body,context,callback){return this.map(function(chunk){var stub=new Stub(function(err,out){if(err){chunk.setError(err)}else{callback(out,chunk)}});body(stub.head,context).end()})};Chunk.prototype.setError=function(err){this.error=err;this.root.flush();return this};function Tap(head,tail){this.head=head;this.tail=tail}Tap.prototype.push=function(tap){return new Tap(tap,this)};Tap.prototype.go=function(value){var tap=this;while(tap){value=tap.head(value);tap=tap.tail}return value};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(s){if(typeof s==="string"){if(!HCHARS.test(s)){return s}return s.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;")}return s};var BS=/\\/g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(s){if(typeof s==="string"){return s.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t")}return s}})(dust);if(typeof exports!=="undefined"){if(typeof process!=="undefined"){require("./server")(dust)}module.exports=dust}(function(e){e.compile=function(s,p,q){try{if(q){s=s.replace(/^\s+/mg,"").replace(/\n/mg,"")}var o=h(e.parse(s));return l(o,p)}catch(r){if(!r.line||!r.column){throw r}throw new SyntaxError(r.message+" At line : "+r.line+", column : "+r.column)}};function h(o){var p={};return e.filterNode(p,o)}e.filterNode=function(o,p){return e.optimizers[p[0]](o,p)};e.optimizers={body:a,buffer:m,special:d,format:b,reference:i,"#":i,"?":i,"^":i,"<":i,"+":i,"@":i,"%":i,partial:i,context:i,params:i,bodies:i,param:i,filters:m,key:m,path:m,literal:m,comment:b};e.pragmas={esc:function(s,r,p,t){var o=s.auto;if(!r){r="h"}s.auto=(r==="s")?"":r;var q=j(s,p.block);s.auto=o;return q}};function i(s,t){var p=[t[0]];for(var r=1,o=t.length;r<o;r++){var q=e.filterNode(s,t[r]);if(q){p.push(q)}}return p}function a(t,u){var q=[u[0]],p;for(var s=1,o=u.length;s<o;s++){var r=e.filterNode(t,u[s]);if(r){if(r[0]==="buffer"){if(p){p[1]+=r[1]}else{p=r;q.push(r)}}else{p=null;q.push(r)}}}return q}var c={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};function d(o,p){return["buffer",c[p[1]]]}function m(o,p){return p}function b(){}function l(o,p){var q={name:p,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(p?'"'+p+'"':"null")+","+e.compileNode(q,o)+");"+g(q)+f(q)+"return body_0;})();"}function g(q){var p=[],r=q.blocks;for(var o in r){p.push("'"+o+"':"+r[o])}if(p.length){q.blocks="ctx=ctx.shiftBlocks(blocks);";return"var blocks={"+p.join(",")+"};"}return q.blocks=""}function f(t){var r=[],q=t.bodies,p=t.blocks;for(var s=0,o=q.length;s<o;s++){r[s]="function body_"+s+"(chk,ctx){"+p+"return chk"+q[s]+";}"}return r.join("")}function j(r,p){var s="";for(var q=1,o=p.length;q<o;q++){s+=e.compileNode(r,p[q])}return s}e.compileNode=function(o,p){return e.nodes[p[0]](o,p)};e.nodes={body:function(p,q){var r=p.index++,o="body_"+r;p.bodies[r]=j(p,q);return o},buffer:function(o,p){return".write("+k(p[1])+")"},format:function(o,p){return".write("+k(p[1]+p[2])+")"},reference:function(o,p){return".reference("+e.compileNode(o,p[1])+",ctx,"+e.compileNode(o,p[2])+")"},"#":function(o,p){return n(o,p,"section")},"?":function(o,p){return n(o,p,"exists")},"^":function(o,p){return n(o,p,"notexists")},"<":function(r,t){var p=t[4];for(var q=1,o=p.length;q<o;q++){var u=p[q],s=u[1][1];if(s==="block"){r.blocks[t[1].text]=e.compileNode(r,u[2]);return""}}return""},"+":function(o,p){if(typeof(p[1].text)==="undefined"&&typeof(p[4])==="undefined"){return".block(ctx.getBlock("+e.compileNode(o,p[1])+",chk, ctx),"+e.compileNode(o,p[2])+", {},"+e.compileNode(o,p[3])+")"}else{return".block(ctx.getBlock("+k(p[1].text)+"),"+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"}},"@":function(o,p){return".helper("+k(p[1].text)+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"},"%":function(t,u){var r=u[1][1];if(!e.pragmas[r]){return""}var x=u[4];var o={};for(var w=1,y=x.length;w<y;w++){var z=x[w];o[z[1][1]]=z[2]}var q=u[3];var v={};for(var w=1,y=q.length;w<y;w++){var s=q[w];v[s[1][1]]=s[2][1]}var A=u[2][1]?u[2][1].text:null;return e.pragmas[r](t,A,o,v)},partial:function(o,p){return".partial("+e.compileNode(o,p[1])+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[3])+")"},context:function(o,p){if(p[1]){return"ctx.rebase("+e.compileNode(o,p[1])+")"}return"ctx"},params:function(r,s){var p=[];for(var q=1,o=s.length;q<o;q++){p.push(e.compileNode(r,s[q]))}if(p.length){return"{"+p.join(",")+"}"}return"null"},bodies:function(r,s){var p=[];for(var q=1,o=s.length;q<o;q++){p.push(e.compileNode(r,s[q]))}return"{"+p.join(",")+"}"},param:function(o,p){return e.compileNode(o,p[1])+":"+e.compileNode(o,p[2])},filters:function(q,s){var t=[];for(var p=1,o=s.length;p<o;p++){var r=s[p];t.push('"'+r+'"')}return'"'+q.auto+'"'+(t.length?",["+t.join(",")+"]":"")},key:function(o,p){return'ctx.get("'+p[1]+'")'},path:function(q,s){var u=s[1],r=s[2],t=[];for(var p=0,o=r.length;p<o;p++){if(e.isArray(r[p])){t.push(e.compileNode(q,r[p]))}else{t.push('"'+r[p]+'"')}}return"ctx.getPath("+u+",["+t.join(",")+"])"},literal:function(o,p){return k(p[1])}};function n(o,p,q){return"."+q+"("+e.compileNode(o,p[1])+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"}var k=(typeof JSON==="undefined")?function(o){return'"'+e.escapeJs(o)+'"'}:JSON.stringify})(typeof exports!=="undefined"?exports:getGlobal());(function(a){var b=(function(){function d(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var c={parse:function(i,n){var g={body:z,part:o,section:t,sec_tag_start:v,end_tag:x,context:X,params:J,bodies:A,reference:aa,partial:O,filters:u,special:f,identifier:W,number:E,frac:Y,integer:I,path:P,key:N,array:e,array_part:p,inline:T,inline_part:Q,buffer:Z,literal:j,esc:h,comment:G,tag:l,ld:F,rd:K,lb:H,rb:L,eol:q,ws:S};if(n!==undefined){if(g[n]===undefined){throw new Error("Invalid rule name: "+d(n)+".")}}else{n="body"}var M={offset:0,line:1,column:1,seenCR:false};var V=0;var k={offset:0,line:1,column:1,seenCR:false};var s=[];function ab(ad,ah,af){var ac=ad;var ag=af-ad.length;for(var ae=0;ae<ag;ae++){ac=ah+ac}return ac}function C(ae){var ad=ae.charCodeAt(0);var ac;var af;if(ad<=255){ac="x";af=2}else{ac="u";af=4}return"\\"+ac+ab(ad.toString(16).toUpperCase(),"0",af)}function B(ad){var ac={};for(var ae in ad){ac[ae]=ad[ae]}return ac}function r(ag,af){var ac=ag.offset+af;for(var ae=ag.offset;ae<ac;ae++){var ad=i.charAt(ae);if(ad==="\n"){if(!ag.seenCR){ag.line++}ag.column=1;ag.seenCR=false}else{if(ad==="\r"||ad==="\u2028"||ad==="\u2029"){ag.line++;ag.column=1;ag.seenCR=true}else{ag.column++;ag.seenCR=false}}}ag.offset+=af}function w(ac){if(M.offset<k.offset){return}if(M.offset>k.offset){k=B(M);s=[]}s.push(ac)}function z(){var ad,ac;var ae;ae=B(M);ad=[];ac=o();while(ac!==null){ad.push(ac);ac=o()}if(ad!==null){ad=(function(ai,af,ag,ah){return["body"].concat(ah)})(ae.offset,ae.line,ae.column,ad)}if(ad===null){M=B(ae)}return ad}function o(){var ac;ac=G();if(ac===null){ac=t();if(ac===null){ac=O();if(ac===null){ac=f();if(ac===null){ac=aa();if(ac===null){ac=Z()}}}}}return ac}function t(){var ai,ah,ag,af,ae,ad,ac;var ak,aj;V++;ak=B(M);aj=B(M);ai=v();if(ai!==null){ah=[];ag=S();while(ag!==null){ah.push(ag);ag=S()}if(ah!==null){ag=K();if(ag!==null){af=z();if(af!==null){ae=A();if(ae!==null){ad=x();if(ad!==null){ac=(function(aq,am,ao,an,al,ap,ar){return an[1].text===ar.text})(M.offset,M.line,M.column,ai,af,ae,ad)?"":null;if(ac!==null){ai=[ai,ah,ag,af,ae,ad,ac]}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}if(ai!==null){ai=(function(aq,am,ao,an,al,ap,ar){ap.push(["param",["literal","block"],al]);an.push(ap);return an})(ak.offset,ak.line,ak.column,ai[0],ai[3],ai[4],ai[5])}if(ai===null){M=B(ak)}if(ai===null){ak=B(M);aj=B(M);ai=v();if(ai!==null){ah=[];ag=S();while(ag!==null){ah.push(ag);ag=S()}if(ah!==null){if(i.charCodeAt(M.offset)===47){ag="/";r(M,1)}else{ag=null;if(V===0){w('"/"')}}if(ag!==null){af=K();if(af!==null){ai=[ai,ah,ag,af]}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}}else{ai=null;M=B(aj)}if(ai!==null){ai=(function(ao,al,an,am){am.push(["bodies"]);return am})(ak.offset,ak.line,ak.column,ai[0])}if(ai===null){M=B(ak)}}V--;if(V===0&&ai===null){w("section")}return ai}function v(){var ai,ag,af,ae,ad,ac;var aj,ah;aj=B(M);ah=B(M);ai=F();if(ai!==null){if(/^[#?^<+@%]/.test(i.charAt(M.offset))){ag=i.charAt(M.offset);r(M,1)}else{ag=null;if(V===0){w("[#?^<+@%]")}}if(ag!==null){af=[];ae=S();while(ae!==null){af.push(ae);ae=S()}if(af!==null){ae=W();if(ae!==null){ad=X();if(ad!==null){ac=J();if(ac!==null){ai=[ai,ag,af,ae,ad,ac]}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}if(ai!==null){ai=(function(ao,ak,am,al,aq,ap,an){return[al,aq,ap,an]})(aj.offset,aj.line,aj.column,ai[1],ai[3],ai[4],ai[5])}if(ai===null){M=B(aj)}return ai}function x(){var ai,ag,af,ae,ad,ac;var aj,ah;V++;aj=B(M);ah=B(M);ai=F();if(ai!==null){if(i.charCodeAt(M.offset)===47){ag="/";r(M,1)}else{ag=null;if(V===0){w('"/"')}}if(ag!==null){af=[];ae=S();while(ae!==null){af.push(ae);ae=S()}if(af!==null){ae=W();if(ae!==null){ad=[];ac=S();while(ac!==null){ad.push(ac);ac=S()}if(ad!==null){ac=K();if(ac!==null){ai=[ai,ag,af,ae,ad,ac]}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}if(ai!==null){ai=(function(am,ak,al,an){return an})(aj.offset,aj.line,aj.column,ai[3])}if(ai===null){M=B(aj)}V--;if(V===0&&ai===null){w("end tag")}return ai}function X(){var af,ad;var ag,ae,ac;ag=B(M);ae=B(M);ac=B(M);if(i.charCodeAt(M.offset)===58){af=":";r(M,1)}else{af=null;if(V===0){w('":"')}}if(af!==null){ad=W();if(ad!==null){af=[af,ad]}else{af=null;M=B(ac)}}else{af=null;M=B(ac)}if(af!==null){af=(function(aj,ah,ai,ak){return ak})(ae.offset,ae.line,ae.column,af[1])}if(af===null){M=B(ae)}af=af!==null?af:"";if(af!==null){af=(function(aj,ah,ai,ak){return ak?["context",ak]:["context"]})(ag.offset,ag.line,ag.column,af)}if(af===null){M=B(ag)}return af}function J(){var ai,ag,ae,ad,ac;var aj,ah,af;V++;aj=B(M);ai=[];ah=B(M);af=B(M);ae=S();if(ae!==null){ag=[];while(ae!==null){ag.push(ae);ae=S()}}else{ag=null}if(ag!==null){ae=N();if(ae!==null){if(i.charCodeAt(M.offset)===61){ad="=";r(M,1)}else{ad=null;if(V===0){w('"="')}}if(ad!==null){ac=E();if(ac===null){ac=W();if(ac===null){ac=T()}}if(ac!==null){ag=[ag,ae,ad,ac]}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}if(ag!==null){ag=(function(ao,ak,an,am,al){return["param",["literal",am],al]})(ah.offset,ah.line,ah.column,ag[1],ag[3])}if(ag===null){M=B(ah)}while(ag!==null){ai.push(ag);ah=B(M);af=B(M);ae=S();if(ae!==null){ag=[];while(ae!==null){ag.push(ae);ae=S()}}else{ag=null}if(ag!==null){ae=N();if(ae!==null){if(i.charCodeAt(M.offset)===61){ad="=";r(M,1)}else{ad=null;if(V===0){w('"="')}}if(ad!==null){ac=E();if(ac===null){ac=W();if(ac===null){ac=T()}}if(ac!==null){ag=[ag,ae,ad,ac]}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}if(ag!==null){ag=(function(ao,ak,an,am,al){return["param",["literal",am],al]})(ah.offset,ah.line,ah.column,ag[1],ag[3])}if(ag===null){M=B(ah)}}if(ai!==null){ai=(function(an,ak,al,am){return["params"].concat(am)})(aj.offset,aj.line,aj.column,ai)}if(ai===null){M=B(aj)}V--;if(V===0&&ai===null){w("params")}return ai}function A(){var ah,ag,af,ae,ad,ac;var ak,aj,ai;V++;ak=B(M);ah=[];aj=B(M);ai=B(M);ag=F();if(ag!==null){if(i.charCodeAt(M.offset)===58){af=":";r(M,1)}else{af=null;if(V===0){w('":"')}}if(af!==null){ae=N();if(ae!==null){ad=K();if(ad!==null){ac=z();if(ac!==null){ag=[ag,af,ae,ad,ac]}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}if(ag!==null){ag=(function(ap,al,ao,an,am){return["param",["literal",an],am]})(aj.offset,aj.line,aj.column,ag[2],ag[4])}if(ag===null){M=B(aj)}while(ag!==null){ah.push(ag);aj=B(M);ai=B(M);ag=F();if(ag!==null){if(i.charCodeAt(M.offset)===58){af=":";r(M,1)}else{af=null;if(V===0){w('":"')}}if(af!==null){ae=N();if(ae!==null){ad=K();if(ad!==null){ac=z();if(ac!==null){ag=[ag,af,ae,ad,ac]}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}}else{ag=null;M=B(ai)}if(ag!==null){ag=(function(ap,al,ao,an,am){return["param",["literal",an],am]})(aj.offset,aj.line,aj.column,ag[2],ag[4])}if(ag===null){M=B(aj)}}if(ah!==null){ah=(function(ao,al,am,an){return["bodies"].concat(an)})(ak.offset,ak.line,ak.column,ah)}if(ah===null){M=B(ak)}V--;if(V===0&&ah===null){w("bodies")}return ah}function aa(){var ag,ae,ad,ac;var ah,af;V++;ah=B(M);af=B(M);ag=F();if(ag!==null){ae=W();if(ae!==null){ad=u();if(ad!==null){ac=K();if(ac!==null){ag=[ag,ae,ad,ac]}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}if(ag!==null){ag=(function(al,ai,aj,am,ak){return["reference",am,ak]})(ah.offset,ah.line,ah.column,ag[1],ag[2])}if(ag===null){M=B(ah)}V--;if(V===0&&ag===null){w("reference")}return ag}function O(){var aj,ai,ah,ag,af,ae,ad,ac,an;var am,al,ak;V++;am=B(M);al=B(M);aj=F();if(aj!==null){if(i.charCodeAt(M.offset)===62){ai=">";r(M,1)}else{ai=null;if(V===0){w('">"')}}if(ai===null){if(i.charCodeAt(M.offset)===43){ai="+";r(M,1)}else{ai=null;if(V===0){w('"+"')}}}if(ai!==null){ah=[];ag=S();while(ag!==null){ah.push(ag);ag=S()}if(ah!==null){ak=B(M);ag=N();if(ag!==null){ag=(function(ar,ao,aq,ap){return["literal",ap]})(ak.offset,ak.line,ak.column,ag)}if(ag===null){M=B(ak)}if(ag===null){ag=T()}if(ag!==null){af=X();if(af!==null){ae=J();if(ae!==null){ad=[];ac=S();while(ac!==null){ad.push(ac);ac=S()}if(ad!==null){if(i.charCodeAt(M.offset)===47){ac="/";r(M,1)}else{ac=null;if(V===0){w('"/"')}}if(ac!==null){an=K();if(an!==null){aj=[aj,ai,ah,ag,af,ae,ad,ac,an]}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}}else{aj=null;M=B(al)}if(aj!==null){aj=(function(au,ao,ar,aq,aw,av,at){var ap=(aq===">")?"partial":aq;return[ap,aw,av,at]})(am.offset,am.line,am.column,aj[1],aj[3],aj[4],aj[5])}if(aj===null){M=B(am)}V--;if(V===0&&aj===null){w("partial")}return aj}function u(){var ag,ae,ac;var ah,af,ad;V++;ah=B(M);ag=[];af=B(M);ad=B(M);if(i.charCodeAt(M.offset)===124){ae="|";r(M,1)}else{ae=null;if(V===0){w('"|"')}}if(ae!==null){ac=N();if(ac!==null){ae=[ae,ac]}else{ae=null;M=B(ad)}}else{ae=null;M=B(ad)}if(ae!==null){ae=(function(ak,ai,aj,al){return al})(af.offset,af.line,af.column,ae[1])}if(ae===null){M=B(af)}while(ae!==null){ag.push(ae);af=B(M);ad=B(M);if(i.charCodeAt(M.offset)===124){ae="|";r(M,1)}else{ae=null;if(V===0){w('"|"')}}if(ae!==null){ac=N();if(ac!==null){ae=[ae,ac]}else{ae=null;M=B(ad)}}else{ae=null;M=B(ad)}if(ae!==null){ae=(function(ak,ai,aj,al){return al})(af.offset,af.line,af.column,ae[1])}if(ae===null){M=B(af)}}if(ag!==null){ag=(function(al,ai,aj,ak){return["filters"].concat(ak)})(ah.offset,ah.line,ah.column,ag)}if(ag===null){M=B(ah)}V--;if(V===0&&ag===null){w("filters")}return ag}function f(){var ag,ae,ad,ac;var ah,af;V++;ah=B(M);af=B(M);ag=F();if(ag!==null){if(i.charCodeAt(M.offset)===126){ae="~";r(M,1)}else{ae=null;if(V===0){w('"~"')}}if(ae!==null){ad=N();if(ad!==null){ac=K();if(ac!==null){ag=[ag,ae,ad,ac]}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}if(ag!==null){ag=(function(al,ai,ak,aj){return["special",aj]})(ah.offset,ah.line,ah.column,ag[2])}if(ag===null){M=B(ah)}V--;if(V===0&&ag===null){w("special")}return ag}function W(){var ac;var ad;V++;ad=B(M);ac=P();if(ac!==null){ac=(function(ai,af,ag,ah){var ae=["path"].concat(ah);ae.text=ah[1].join(".");return ae})(ad.offset,ad.line,ad.column,ac)}if(ac===null){M=B(ad)}if(ac===null){ad=B(M);ac=N();if(ac!==null){ac=(function(ai,af,ah,ag){var ae=["key",ag];ae.text=ag;return ae})(ad.offset,ad.line,ad.column,ac)}if(ac===null){M=B(ad)}}V--;if(V===0&&ac===null){w("identifier")}return ac}function E(){var ac;var ad;V++;ad=B(M);ac=Y();if(ac===null){ac=I()}if(ac!==null){ac=(function(ag,ae,af,ah){return["literal",ah]})(ad.offset,ad.line,ad.column,ac)}if(ac===null){M=B(ad)}V--;if(V===0&&ac===null){w("number")}return ac}function Y(){var ag,ae,ad,ac;var ah,af;V++;ah=B(M);af=B(M);ag=I();if(ag!==null){if(i.charCodeAt(M.offset)===46){ae=".";r(M,1)}else{ae=null;if(V===0){w('"."')}}if(ae!==null){ac=I();if(ac!==null){ad=[];while(ac!==null){ad.push(ac);ac=I()}}else{ad=null}if(ad!==null){ag=[ag,ae,ad]}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}}else{ag=null;M=B(af)}if(ag!==null){ag=(function(am,aj,ak,ai,al){return parseFloat(ai+"."+al.join(""))})(ah.offset,ah.line,ah.column,ag[0],ag[2])}if(ag===null){M=B(ah)}V--;if(V===0&&ag===null){w("frac")}return ag}function I(){var ad,ac;var ae;V++;ae=B(M);if(/^[0-9]/.test(i.charAt(M.offset))){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("[0-9]")}}if(ac!==null){ad=[];while(ac!==null){ad.push(ac);if(/^[0-9]/.test(i.charAt(M.offset))){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("[0-9]")}}}}else{ad=null}if(ad!==null){ad=(function(ai,af,ag,ah){return parseInt(ah.join(""),10)})(ae.offset,ae.line,ae.column,ad)}if(ad===null){M=B(ae)}V--;if(V===0&&ad===null){w("integer")}return ad}function P(){var af,ad,ac;var ag,ae;V++;ag=B(M);ae=B(M);af=N();af=af!==null?af:"";if(af!==null){ac=p();if(ac===null){ac=e()}if(ac!==null){ad=[];while(ac!==null){ad.push(ac);ac=p();if(ac===null){ac=e()}}}else{ad=null}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(al,ah,aj,ai,ak){ak=ak[0];if(ai&&ak){ak.unshift(ai);return[false,ak]}return[true,ak]})(ag.offset,ag.line,ag.column,af[0],af[1])}if(af===null){M=B(ag)}if(af===null){ag=B(M);ae=B(M);if(i.charCodeAt(M.offset)===46){af=".";r(M,1)}else{af=null;if(V===0){w('"."')}}if(af!==null){ad=[];ac=p();if(ac===null){ac=e()}while(ac!==null){ad.push(ac);ac=p();if(ac===null){ac=e()}}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(ak,ah,ai,aj){if(aj.length>0){return[true,aj[0]]}return[true,[]]})(ag.offset,ag.line,ag.column,af[1])}if(af===null){M=B(ag)}}V--;if(V===0&&af===null){w("path")}return af}function N(){var af,ad,ac;var ag,ae;V++;ag=B(M);ae=B(M);if(/^[a-zA-Z_$]/.test(i.charAt(M.offset))){af=i.charAt(M.offset);r(M,1)}else{af=null;if(V===0){w("[a-zA-Z_$]")}}if(af!==null){ad=[];if(/^[0-9a-zA-Z_$\-]/.test(i.charAt(M.offset))){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("[0-9a-zA-Z_$\\-]")}}while(ac!==null){ad.push(ac);if(/^[0-9a-zA-Z_$\-]/.test(i.charAt(M.offset))){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("[0-9a-zA-Z_$\\-]")}}}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(al,ah,ak,aj,ai){return aj+ai.join("")})(ag.offset,ag.line,ag.column,af[0],af[1])}if(af===null){M=B(ag)}V--;if(V===0&&af===null){w("key")}return af}function e(){var ai,ag,ae;var aj,ah,af,ad,ac;V++;aj=B(M);ah=B(M);af=B(M);ad=B(M);ai=H();if(ai!==null){ac=B(M);if(/^[0-9]/.test(i.charAt(M.offset))){ae=i.charAt(M.offset);r(M,1)}else{ae=null;if(V===0){w("[0-9]")}}if(ae!==null){ag=[];while(ae!==null){ag.push(ae);if(/^[0-9]/.test(i.charAt(M.offset))){ae=i.charAt(M.offset);r(M,1)}else{ae=null;if(V===0){w("[0-9]")}}}}else{ag=null}if(ag!==null){ag=(function(am,ak,al,an){return an.join("")})(ac.offset,ac.line,ac.column,ag)}if(ag===null){M=B(ac)}if(ag===null){ag=W()}if(ag!==null){ae=L();if(ae!==null){ai=[ai,ag,ae]}else{ai=null;M=B(ad)}}else{ai=null;M=B(ad)}}else{ai=null;M=B(ad)}if(ai!==null){ai=(function(an,al,am,ak){return ak})(af.offset,af.line,af.column,ai[1])}if(ai===null){M=B(af)}if(ai!==null){ag=p();ag=ag!==null?ag:"";if(ag!==null){ai=[ai,ag]}else{ai=null;M=B(ah)}}else{ai=null;M=B(ah)}if(ai!==null){ai=(function(ao,ak,an,am,al){if(al){al.unshift(am)}else{al=[am]}return al})(aj.offset,aj.line,aj.column,ai[0],ai[1])}if(ai===null){M=B(aj)}V--;if(V===0&&ai===null){w("array")}return ai}function p(){var ah,af,ad;var ai,ag,ae,ac;V++;ai=B(M);ag=B(M);ae=B(M);ac=B(M);if(i.charCodeAt(M.offset)===46){af=".";r(M,1)}else{af=null;if(V===0){w('"."')}}if(af!==null){ad=N();if(ad!==null){af=[af,ad]}else{af=null;M=B(ac)}}else{af=null;M=B(ac)}if(af!==null){af=(function(am,aj,al,ak){return ak})(ae.offset,ae.line,ae.column,af[1])}if(af===null){M=B(ae)}if(af!==null){ah=[];while(af!==null){ah.push(af);ae=B(M);ac=B(M);if(i.charCodeAt(M.offset)===46){af=".";r(M,1)}else{af=null;if(V===0){w('"."')}}if(af!==null){ad=N();if(ad!==null){af=[af,ad]}else{af=null;M=B(ac)}}else{af=null;M=B(ac)}if(af!==null){af=(function(am,aj,al,ak){return ak})(ae.offset,ae.line,ae.column,af[1])}if(af===null){M=B(ae)}}}else{ah=null}if(ah!==null){af=e();af=af!==null?af:"";if(af!==null){ah=[ah,af]}else{ah=null;M=B(ag)}}else{ah=null;M=B(ag)}if(ah!==null){ah=(function(an,ak,al,am,aj){if(aj){return am.concat(aj)}else{return am}})(ai.offset,ai.line,ai.column,ah[0],ah[1])}if(ah===null){M=B(ai)}V--;if(V===0&&ah===null){w("array_part")}return ah}function T(){var af,ad,ac;var ag,ae;V++;ag=B(M);ae=B(M);if(i.charCodeAt(M.offset)===34){af='"';r(M,1)}else{af=null;if(V===0){w('"\\""')}}if(af!==null){if(i.charCodeAt(M.offset)===34){ad='"';r(M,1)}else{ad=null;if(V===0){w('"\\""')}}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(aj,ah,ai){return["literal",""]})(ag.offset,ag.line,ag.column)}if(af===null){M=B(ag)}if(af===null){ag=B(M);ae=B(M);if(i.charCodeAt(M.offset)===34){af='"';r(M,1)}else{af=null;if(V===0){w('"\\""')}}if(af!==null){ad=j();if(ad!==null){if(i.charCodeAt(M.offset)===34){ac='"';r(M,1)}else{ac=null;if(V===0){w('"\\""')}}if(ac!==null){af=[af,ad,ac]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(ak,ai,aj,ah){return["literal",ah]})(ag.offset,ag.line,ag.column,af[1])}if(af===null){M=B(ag)}if(af===null){ag=B(M);ae=B(M);if(i.charCodeAt(M.offset)===34){af='"';r(M,1)}else{af=null;if(V===0){w('"\\""')}}if(af!==null){ac=Q();if(ac!==null){ad=[];while(ac!==null){ad.push(ac);ac=Q()}}else{ad=null}if(ad!==null){if(i.charCodeAt(M.offset)===34){ac='"';r(M,1)}else{ac=null;if(V===0){w('"\\""')}}if(ac!==null){af=[af,ad,ac]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(ak,ah,ai,aj){return["body"].concat(aj)})(ag.offset,ag.line,ag.column,af[1])}if(af===null){M=B(ag)}}}V--;if(V===0&&af===null){w("inline")}return af}function Q(){var ac;var ad;ac=f();if(ac===null){ac=aa();if(ac===null){ad=B(M);ac=j();if(ac!==null){ac=(function(ah,af,ag,ae){return["buffer",ae]})(ad.offset,ad.line,ad.column,ac)}if(ac===null){M=B(ad)}}}return ac}function Z(){var ag,af,ae,ad,ac;var ak,aj,ai,ah;V++;ak=B(M);aj=B(M);ag=q();if(ag!==null){af=[];ae=S();while(ae!==null){af.push(ae);ae=S()}if(af!==null){ag=[ag,af]}else{ag=null;M=B(aj)}}else{ag=null;M=B(aj)}if(ag!==null){ag=(function(ap,am,an,ao,al){return["format",ao,al.join("")]})(ak.offset,ak.line,ak.column,ag[0],ag[1])}if(ag===null){M=B(ak)}if(ag===null){ak=B(M);aj=B(M);ai=B(M);ah=B(M);V++;af=l();V--;if(af===null){af=""}else{af=null;M=B(ah)}if(af!==null){ah=B(M);V++;ae=q();V--;if(ae===null){ae=""}else{ae=null;M=B(ah)}if(ae!==null){ah=B(M);V++;ad=G();V--;if(ad===null){ad=""}else{ad=null;M=B(ah)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){af=[af,ae,ad,ac]}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}if(af!==null){af=(function(an,al,am,ao){return ao})(aj.offset,aj.line,aj.column,af[3])}if(af===null){M=B(aj)}if(af!==null){ag=[];while(af!==null){ag.push(af);aj=B(M);ai=B(M);ah=B(M);V++;af=l();V--;if(af===null){af=""}else{af=null;M=B(ah)}if(af!==null){ah=B(M);V++;ae=q();V--;if(ae===null){ae=""}else{ae=null;M=B(ah)}if(ae!==null){ah=B(M);V++;ad=G();V--;if(ad===null){ad=""}else{ad=null;M=B(ah)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){af=[af,ae,ad,ac]}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}}else{af=null;M=B(ai)}if(af!==null){af=(function(an,al,am,ao){return ao})(aj.offset,aj.line,aj.column,af[3])}if(af===null){M=B(aj)}}}else{ag=null}if(ag!==null){ag=(function(ao,am,an,al){return["buffer",al.join("")]})(ak.offset,ak.line,ak.column,ag)}if(ag===null){M=B(ak)}}V--;if(V===0&&ag===null){w("buffer")}return ag}function j(){var ah,af,ad;var ai,ag,ae,ac;V++;ai=B(M);ag=B(M);ae=B(M);ac=B(M);V++;af=l();V--;if(af===null){af=""}else{af=null;M=B(ac)}if(af!==null){ad=h();if(ad===null){if(/^[^"]/.test(i.charAt(M.offset))){ad=i.charAt(M.offset);r(M,1)}else{ad=null;if(V===0){w('[^"]')}}}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(al,aj,ak,am){return am})(ag.offset,ag.line,ag.column,af[1])}if(af===null){M=B(ag)}if(af!==null){ah=[];while(af!==null){ah.push(af);ag=B(M);ae=B(M);ac=B(M);V++;af=l();V--;if(af===null){af=""}else{af=null;M=B(ac)}if(af!==null){ad=h();if(ad===null){if(/^[^"]/.test(i.charAt(M.offset))){ad=i.charAt(M.offset);r(M,1)}else{ad=null;if(V===0){w('[^"]')}}}if(ad!==null){af=[af,ad]}else{af=null;M=B(ae)}}else{af=null;M=B(ae)}if(af!==null){af=(function(al,aj,ak,am){return am})(ag.offset,ag.line,ag.column,af[1])}if(af===null){M=B(ag)}}}else{ah=null}if(ah!==null){ah=(function(am,ak,al,aj){return aj.join("")})(ai.offset,ai.line,ai.column,ah)}if(ah===null){M=B(ai)}V--;if(V===0&&ah===null){w("literal")}return ah}function h(){var ac;var ad;ad=B(M);if(i.substr(M.offset,2)==='\\"'){ac='\\"';r(M,2)}else{ac=null;if(V===0){w('"\\\\\\""')}}if(ac!==null){ac=(function(ag,ae,af){return'"'})(ad.offset,ad.line,ad.column)}if(ac===null){M=B(ad)}return ac}function G(){var af,ae,ad,ac;var ak,aj,ai,ah,ag;V++;ak=B(M);aj=B(M);if(i.substr(M.offset,2)==="{!"){af="{!";r(M,2)}else{af=null;if(V===0){w('"{!"')}}if(af!==null){ae=[];ai=B(M);ah=B(M);ag=B(M);V++;if(i.substr(M.offset,2)==="!}"){ad="!}";r(M,2)}else{ad=null;if(V===0){w('"!}"')}}V--;if(ad===null){ad=""}else{ad=null;M=B(ag)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){ad=[ad,ac]}else{ad=null;M=B(ah)}}else{ad=null;M=B(ah)}if(ad!==null){ad=(function(an,al,am,ao){return ao})(ai.offset,ai.line,ai.column,ad[1])}if(ad===null){M=B(ai)}while(ad!==null){ae.push(ad);ai=B(M);ah=B(M);ag=B(M);V++;if(i.substr(M.offset,2)==="!}"){ad="!}";r(M,2)}else{ad=null;if(V===0){w('"!}"')}}V--;if(ad===null){ad=""}else{ad=null;M=B(ag)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){ad=[ad,ac]}else{ad=null;M=B(ah)}}else{ad=null;M=B(ah)}if(ad!==null){ad=(function(an,al,am,ao){return ao})(ai.offset,ai.line,ai.column,ad[1])}if(ad===null){M=B(ai)}}if(ae!==null){if(i.substr(M.offset,2)==="!}"){ad="!}";r(M,2)}else{ad=null;if(V===0){w('"!}"')}}if(ad!==null){af=[af,ae,ad]}else{af=null;M=B(aj)}}else{af=null;M=B(aj)}}else{af=null;M=B(aj)}if(af!==null){af=(function(an,al,am,ao){return["comment",ao.join("")]})(ak.offset,ak.line,ak.column,af[1])}if(af===null){M=B(ak)}V--;if(V===0&&af===null){w("comment")}return af}function l(){var aj,ai,ah,ag,af,ae,ad,ac;var am,al,ak;am=B(M);aj=F();if(aj!==null){ai=[];ah=S();while(ah!==null){ai.push(ah);ah=S()}if(ai!==null){if(/^[#?^><+%:@\/~%]/.test(i.charAt(M.offset))){ah=i.charAt(M.offset);r(M,1)}else{ah=null;if(V===0){w("[#?^><+%:@\\/~%]")}}if(ah!==null){ag=[];af=S();while(af!==null){ag.push(af);af=S()}if(ag!==null){al=B(M);ak=B(M);V++;ae=K();V--;if(ae===null){ae=""}else{ae=null;M=B(ak)}if(ae!==null){ak=B(M);V++;ad=q();V--;if(ad===null){ad=""}else{ad=null;M=B(ak)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){ae=[ae,ad,ac]}else{ae=null;M=B(al)}}else{ae=null;M=B(al)}}else{ae=null;M=B(al)}if(ae!==null){af=[];while(ae!==null){af.push(ae);al=B(M);ak=B(M);V++;ae=K();V--;if(ae===null){ae=""}else{ae=null;M=B(ak)}if(ae!==null){ak=B(M);V++;ad=q();V--;if(ad===null){ad=""}else{ad=null;M=B(ak)}if(ad!==null){if(i.length>M.offset){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("any character")}}if(ac!==null){ae=[ae,ad,ac]}else{ae=null;M=B(al)}}else{ae=null;M=B(al)}}else{ae=null;M=B(al)}}}else{af=null}if(af!==null){ae=[];ad=S();while(ad!==null){ae.push(ad);ad=S()}if(ae!==null){ad=K();if(ad!==null){aj=[aj,ai,ah,ag,af,ae,ad]}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}}else{aj=null;M=B(am)}if(aj===null){aj=aa()}return aj}function F(){var ac;if(i.charCodeAt(M.offset)===123){ac="{";r(M,1)}else{ac=null;if(V===0){w('"{"')}}return ac}function K(){var ac;if(i.charCodeAt(M.offset)===125){ac="}";r(M,1)}else{ac=null;if(V===0){w('"}"')}}return ac}function H(){var ac;if(i.charCodeAt(M.offset)===91){ac="[";r(M,1)}else{ac=null;if(V===0){w('"["')}}return ac}function L(){var ac;if(i.charCodeAt(M.offset)===93){ac="]";r(M,1)}else{ac=null;if(V===0){w('"]"')}}return ac}function q(){var ac;if(i.charCodeAt(M.offset)===10){ac="\n";r(M,1)}else{ac=null;if(V===0){w('"\\n"')}}if(ac===null){if(i.substr(M.offset,2)==="\r\n"){ac="\r\n";r(M,2)}else{ac=null;if(V===0){w('"\\r\\n"')}}if(ac===null){if(i.charCodeAt(M.offset)===13){ac="\r";r(M,1)}else{ac=null;if(V===0){w('"\\r"')}}if(ac===null){if(i.charCodeAt(M.offset)===8232){ac="\u2028";r(M,1)}else{ac=null;if(V===0){w('"\\u2028"')}}if(ac===null){if(i.charCodeAt(M.offset)===8233){ac="\u2029";r(M,1)}else{ac=null;if(V===0){w('"\\u2029"')}}}}}}return ac}function S(){var ac;if(/^[\t\x0B\f \xA0\uFEFF]/.test(i.charAt(M.offset))){ac=i.charAt(M.offset);r(M,1)}else{ac=null;if(V===0){w("[\\t\\x0B\\f \\xA0\\uFEFF]")}}if(ac===null){ac=q()}return ac}function D(ae){ae.sort();var af=null;var ad=[];for(var ac=0;ac<ae.length;ac++){if(ae[ac]!==af){ad.push(ae[ac]);af=ae[ac]}}return ad}var y=g[n]();if(y===null||M.offset!==i.length){var R=Math.max(M.offset,k.offset);var m=R<i.length?i.charAt(R):null;var U=M.offset>k.offset?M:k;throw new b.SyntaxError(D(s),m,R,U.line,U.column)}return y},toSource:function(){return this._source}};c.SyntaxError=function(h,i,j,f,g){function e(m,n){var k,l;switch(m.length){case 0:k="end of input";break;case 1:k=m[0];break;default:k=m.slice(0,m.length-1).join(", ")+" or "+m[m.length-1]}l=n?d(n):"end of input";return"Expected "+k+" but "+l+" found."}this.name="SyntaxError";this.expected=h;this.found=i;this.message=e(h,i);this.offset=j;this.line=f;this.column=g};c.SyntaxError.prototype=Error.prototype;return c})();a.parse=b.parse})(typeof exports!=="undefined"?exports:getGlobal());(function(){if(typeof exports!=="undefined"){dust=require("dust")}var _console=(typeof console!=="undefined")?console:{log:function(){}};function isSelect(context){var value=context.current();return typeof value==="object"&&value.isSelect===true}function jsonFilter(key,value){if(typeof value==="function"){return value.toString()}return value}function filter(chunk,context,bodies,params,filterOp){params=params||{};var body=bodies.block,actualKey,expectedValue,filterOpType=params.filterOpType||"";if(typeof params.key!=="undefined"){actualKey=dust.helpers.tap(params.key,chunk,context)}else{if(isSelect(context)){actualKey=context.current().selectKey;if(context.current().isResolved){filterOp=function(){return false}}}else{_console.log("No key specified for filter in:"+filterOpType+" helper ");return chunk}}expectedValue=dust.helpers.tap(params.value,chunk,context);if(filterOp(coerce(expectedValue,params.type,context),coerce(actualKey,params.type,context))){if(isSelect(context)){context.current().isResolved=true}if(body){return chunk.render(body,context)}else{_console.log("Missing body block in the "+filterOpType+" helper ");return chunk}}else{if(bodies["else"]){return chunk.render(bodies["else"],context)}}return chunk}function coerce(value,type,context){if(value){switch(type||typeof(value)){case"number":return +value;case"string":return String(value);case"boolean":value=(value==="false"?false:value);return Boolean(value);case"date":return new Date(value);case"context":return context.get(value)}}return value}var helpers={tap:function(input,chunk,context){var output=input;if(typeof input==="function"){if(input.isFunction===true){output=input()}else{output="";chunk.tap(function(data){output+=data;return""}).render(input,context).untap();if(output===""){output=false}}}return output},sep:function(chunk,context,bodies){var body=bodies.block;if(context.stack.index===context.stack.of-1){return chunk}if(body){return bodies.block(chunk,context)}else{return chunk}},idx:function(chunk,context,bodies){var body=bodies.block;if(body){return bodies.block(chunk,context.push(context.stack.index))}else{return chunk}},contextDump:function(chunk,context,bodies,params){var p=params||{},to=p.to||"output",key=p.key||"current",dump;to=dust.helpers.tap(to,chunk,context),key=dust.helpers.tap(key,chunk,context);if(key==="full"){dump=JSON.stringify(context.stack,jsonFilter,2)}else{dump=JSON.stringify(context.stack.head,jsonFilter,2)}if(to==="console"){_console.log(dump);return chunk}else{return chunk.write(dump)}},"if":function(chunk,context,bodies,params){var body=bodies.block,skip=bodies["else"];if(params&&params.cond){var cond=params.cond;cond=dust.helpers.tap(cond,chunk,context);if(eval(cond)){if(body){return chunk.render(bodies.block,context)}else{_console.log("Missing body block in the if helper!");return chunk}}if(skip){return chunk.render(bodies["else"],context)}}else{_console.log("No condition given in the if helper!")}return chunk},math:function(chunk,context,bodies,params){if(params&&typeof params.key!=="undefined"&&params.method){var key=params.key,method=params.method,operand=params.operand,mathOut=null,operError=function(){_console.log("operand is required for this math method");return null};key=dust.helpers.tap(key,chunk,context);operand=dust.helpers.tap(operand,chunk,context);switch(method){case"mod":if(operand===0||operand===-0){_console.log("operand for divide operation is 0/-0: expect Nan!")}mathOut=parseFloat(key)%parseFloat(operand);break;case"add":mathOut=parseFloat(key)+parseFloat(operand);break;case"subtract":mathOut=parseFloat(key)-parseFloat(operand);break;case"multiply":mathOut=parseFloat(key)*parseFloat(operand);break;case"divide":if(operand===0||operand===-0){_console.log("operand for divide operation is 0/-0: expect Nan/Infinity!")}mathOut=parseFloat(key)/parseFloat(operand);break;case"ceil":mathOut=Math.ceil(parseFloat(key));break;case"floor":mathOut=Math.floor(parseFloat(key));break;case"abs":mathOut=Math.abs(parseFloat(key));break;default:_console.log("method passed is not supported")}if(mathOut!==null){if(bodies&&bodies.block){return chunk.render(bodies.block,context.push({isSelect:true,isResolved:false,selectKey:mathOut}))}else{return chunk.write(mathOut)}}else{return chunk}}else{_console.log("Key is a required parameter for math helper along with method/operand!")}return chunk},select:function(chunk,context,bodies,params){var body=bodies.block;if(params&&typeof params.key!=="undefined"){var key=dust.helpers.tap(params.key,chunk,context);if(body){return chunk.render(bodies.block,context.push({isSelect:true,isResolved:false,selectKey:key}))}else{_console.log("Missing body block in the select helper ");return chunk}}else{_console.log("No key given in the select helper!")}return chunk},eq:function(chunk,context,bodies,params){if(params){params.filterOpType="eq"}return filter(chunk,context,bodies,params,function(expected,actual){return actual===expected})},ne:function(chunk,context,bodies,params){if(params){params.filterOpType="ne";return filter(chunk,context,bodies,params,function(expected,actual){return actual!==expected})}return chunk},lt:function(chunk,context,bodies,params){if(params){params.filterOpType="lt";return filter(chunk,context,bodies,params,function(expected,actual){return actual<expected})}},lte:function(chunk,context,bodies,params){if(params){params.filterOpType="lte";return filter(chunk,context,bodies,params,function(expected,actual){return actual<=expected})}return chunk},gt:function(chunk,context,bodies,params){if(params){params.filterOpType="gt";return filter(chunk,context,bodies,params,function(expected,actual){return actual>expected})}return chunk},gte:function(chunk,context,bodies,params){if(params){params.filterOpType="gte";return filter(chunk,context,bodies,params,function(expected,actual){return actual>=expected})}return chunk},"default":function(chunk,context,bodies,params){if(params){params.filterOpType="default"}return filter(chunk,context,bodies,params,function(expected,actual){return true})},size:function(chunk,context,bodies,params){var key,value=0,nr,k;params=params||{};key=params.key;if(!key||key===true){value=0}else{if(dust.isArray(key)){value=key.length}else{if(!isNaN(parseFloat(key))&&isFinite(key)){value=key}else{if(typeof key==="object"){nr=0;for(k in key){if(Object.hasOwnProperty.call(key,k)){nr++}}value=nr}else{value=(key+"").length}}}}return chunk.write(value)}};dust.helpers=helpers;if(typeof exports!=="undefined"){module.exports=dust}})();